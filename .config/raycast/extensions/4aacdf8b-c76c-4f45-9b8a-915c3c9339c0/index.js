var bl=Object.create;var Br=Object.defineProperty;var yl=Object.getOwnPropertyDescriptor;var gl=Object.getOwnPropertyNames;var Sl=Object.getPrototypeOf,_l=Object.prototype.hasOwnProperty;var Ri=n=>Br(n,"__esModule",{value:!0});var Wt=(n,r)=>()=>(n&&(r=n(n=0)),r);var v=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),Ti=(n,r)=>{for(var o in r)Br(n,o,{get:r[o],enumerable:!0})},Ei=(n,r,o,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of gl(r))!_l.call(n,s)&&(o||s!=="default")&&Br(n,s,{get:()=>r[s],enumerable:!(a=yl(r,s))||a.enumerable});return n},Se=(n,r)=>Ei(Ri(Br(n!=null?bl(Sl(n)):{},"default",!r&&n&&n.__esModule?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n),wl=(n=>(r,o)=>n&&n.get(r)||(o=Ei(Ri({}),r,1),n&&n.set(r,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var Ci=(n,r,o)=>{if(!r.has(n))throw TypeError("Cannot "+o)};var W=(n,r,o)=>(Ci(n,r,"read from private field"),o?o.call(n):r.get(n)),ee=(n,r,o)=>{if(r.has(n))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(n):r.set(n,o)},Y=(n,r,o,a)=>(Ci(n,r,"write to private field"),a?a.call(n,o):r.set(n,o),o);var ki=v((jf,Bi)=>{Bi.exports=vi;vi.sync=Tl;var Pi=require("fs");function Rl(n,r){var o=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var a=0;a<o.length;a++){var s=o[a].toLowerCase();if(s&&n.substr(-s.length).toLowerCase()===s)return!0}return!1}function Ai(n,r,o){return!n.isSymbolicLink()&&!n.isFile()?!1:Rl(r,o)}function vi(n,r,o){Pi.stat(n,function(a,s){o(a,a?!1:Ai(s,n,r))})}function Tl(n,r){return Ai(Pi.statSync(n),n,r)}});var Wi=v((Nf,qi)=>{qi.exports=Oi;Oi.sync=El;var Ii=require("fs");function Oi(n,r,o){Ii.stat(n,function(a,s){o(a,a?!1:xi(s,r))})}function El(n,r){return xi(Ii.statSync(n),r)}function xi(n,r){return n.isFile()&&Cl(n,r)}function Cl(n,r){var o=n.mode,a=n.uid,s=n.gid,l=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),f=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),p=parseInt("100",8),m=parseInt("010",8),y=parseInt("001",8),R=p|m,T=o&y||o&m&&s===f||o&p&&a===l||o&R&&l===0;return T}});var Fi=v((Hf,Di)=>{var Uf=require("fs"),kr;process.platform==="win32"||global.TESTING_WINDOWS?kr=ki():kr=Wi();Di.exports=In;In.sync=Pl;function In(n,r,o){if(typeof r=="function"&&(o=r,r={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(a,s){In(n,r||{},function(l,f){l?s(l):a(f)})})}kr(n,r||{},function(a,s){a&&(a.code==="EACCES"||r&&r.ignoreErrors)&&(a=null,s=!1),o(a,s)})}function Pl(n,r){try{return kr.sync(n,r||{})}catch(o){if(r&&r.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Ui=v((Gf,Ni)=>{var ot=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Li=require("path"),Al=ot?";":":",zi=Fi(),$i=n=>Object.assign(new Error(`not found: ${n}`),{code:"ENOENT"}),Mi=(n,r)=>{let o=r.colon||Al,a=n.match(/\//)||ot&&n.match(/\\/)?[""]:[...ot?[process.cwd()]:[],...(r.path||process.env.PATH||"").split(o)],s=ot?r.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",l=ot?s.split(o):[""];return ot&&n.indexOf(".")!==-1&&l[0]!==""&&l.unshift(""),{pathEnv:a,pathExt:l,pathExtExe:s}},ji=(n,r,o)=>{typeof r=="function"&&(o=r,r={}),r||(r={});let{pathEnv:a,pathExt:s,pathExtExe:l}=Mi(n,r),f=[],p=y=>new Promise((R,T)=>{if(y===a.length)return r.all&&f.length?R(f):T($i(n));let S=a[y],g=/^".*"$/.test(S)?S.slice(1,-1):S,b=Li.join(g,n),E=!g&&/^\.[\\\/]/.test(n)?n.slice(0,2)+b:b;R(m(E,y,0))}),m=(y,R,T)=>new Promise((S,g)=>{if(T===s.length)return S(p(R+1));let b=s[T];zi(y+b,{pathExt:l},(E,P)=>{if(!E&&P)if(r.all)f.push(y+b);else return S(y+b);return S(m(y,R,T+1))})});return o?p(0).then(y=>o(null,y),o):p(0)},vl=(n,r)=>{r=r||{};let{pathEnv:o,pathExt:a,pathExtExe:s}=Mi(n,r),l=[];for(let f=0;f<o.length;f++){let p=o[f],m=/^".*"$/.test(p)?p.slice(1,-1):p,y=Li.join(m,n),R=!m&&/^\.[\\\/]/.test(n)?n.slice(0,2)+y:y;for(let T=0;T<a.length;T++){let S=R+a[T];try{if(zi.sync(S,{pathExt:s}))if(r.all)l.push(S);else return S}catch{}}}if(r.all&&l.length)return l;if(r.nothrow)return null;throw $i(n)};Ni.exports=ji;ji.sync=vl});var xn=v((Vf,On)=>{"use strict";var Hi=(n={})=>{let r=n.env||process.env;return(n.platform||process.platform)!=="win32"?"PATH":Object.keys(r).reverse().find(a=>a.toUpperCase()==="PATH")||"Path"};On.exports=Hi;On.exports.default=Hi});var Qi=v((Yf,Yi)=>{"use strict";var Gi=require("path"),Bl=Ui(),kl=xn();function Vi(n,r){let o=n.options.env||process.env,a=process.cwd(),s=n.options.cwd!=null,l=s&&process.chdir!==void 0&&!process.chdir.disabled;if(l)try{process.chdir(n.options.cwd)}catch{}let f;try{f=Bl.sync(n.command,{path:o[kl({env:o})],pathExt:r?Gi.delimiter:void 0})}catch{}finally{l&&process.chdir(a)}return f&&(f=Gi.resolve(s?n.options.cwd:"",f)),f}function Il(n){return Vi(n)||Vi(n,!0)}Yi.exports=Il});var Xi=v((Qf,Wn)=>{"use strict";var qn=/([()\][%!^"`<>&|;, *?])/g;function Ol(n){return n=n.replace(qn,"^$1"),n}function xl(n,r){return n=`${n}`,n=n.replace(/(\\*)"/g,'$1$1\\"'),n=n.replace(/(\\*)$/,"$1$1"),n=`"${n}"`,n=n.replace(qn,"^$1"),r&&(n=n.replace(qn,"^$1")),n}Wn.exports.command=Ol;Wn.exports.argument=xl});var Zi=v((Xf,Ki)=>{"use strict";Ki.exports=/^#!(.*)/});var ea=v((Kf,Ji)=>{"use strict";var ql=Zi();Ji.exports=(n="")=>{let r=n.match(ql);if(!r)return null;let[o,a]=r[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?a:a?`${s} ${a}`:s}});var ra=v((Zf,ta)=>{"use strict";var Dn=require("fs"),Wl=ea();function Dl(n){let r=150,o=Buffer.alloc(r),a;try{a=Dn.openSync(n,"r"),Dn.readSync(a,o,0,r,0),Dn.closeSync(a)}catch{}return Wl(o.toString())}ta.exports=Dl});var aa=v((Jf,ia)=>{"use strict";var Fl=require("path"),na=Qi(),oa=Xi(),Ll=ra(),zl=process.platform==="win32",$l=/\.(?:com|exe)$/i,Ml=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function jl(n){n.file=na(n);let r=n.file&&Ll(n.file);return r?(n.args.unshift(n.file),n.command=r,na(n)):n.file}function Nl(n){if(!zl)return n;let r=jl(n),o=!$l.test(r);if(n.options.forceShell||o){let a=Ml.test(r);n.command=Fl.normalize(n.command),n.command=oa.command(n.command),n.args=n.args.map(l=>oa.argument(l,a));let s=[n.command].concat(n.args).join(" ");n.args=["/d","/s","/c",`"${s}"`],n.command=process.env.comspec||"cmd.exe",n.options.windowsVerbatimArguments=!0}return n}function Ul(n,r,o){r&&!Array.isArray(r)&&(o=r,r=null),r=r?r.slice(0):[],o=Object.assign({},o);let a={command:n,args:r,options:o,file:void 0,original:{command:n,args:r}};return o.shell?a:Nl(a)}ia.exports=Ul});var la=v((ed,ua)=>{"use strict";var Fn=process.platform==="win32";function Ln(n,r){return Object.assign(new Error(`${r} ${n.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${r} ${n.command}`,path:n.command,spawnargs:n.args})}function Hl(n,r){if(!Fn)return;let o=n.emit;n.emit=function(a,s){if(a==="exit"){let l=sa(s,r,"spawn");if(l)return o.call(n,"error",l)}return o.apply(n,arguments)}}function sa(n,r){return Fn&&n===1&&!r.file?Ln(r.original,"spawn"):null}function Gl(n,r){return Fn&&n===1&&!r.file?Ln(r.original,"spawnSync"):null}ua.exports={hookChildProcess:Hl,verifyENOENT:sa,verifyENOENTSync:Gl,notFoundError:Ln}});var da=v((td,it)=>{"use strict";var ca=require("child_process"),zn=aa(),$n=la();function fa(n,r,o){let a=zn(n,r,o),s=ca.spawn(a.command,a.args,a.options);return $n.hookChildProcess(s,a),s}function Vl(n,r,o){let a=zn(n,r,o),s=ca.spawnSync(a.command,a.args,a.options);return s.error=s.error||$n.verifyENOENTSync(s.status,a),s}it.exports=fa;it.exports.spawn=fa;it.exports.sync=Vl;it.exports._parse=zn;it.exports._enoent=$n});var ma=v((rd,ha)=>{"use strict";ha.exports=n=>{let r=typeof n=="string"?`
`:`
`.charCodeAt(),o=typeof n=="string"?"\r":"\r".charCodeAt();return n[n.length-1]===r&&(n=n.slice(0,n.length-1)),n[n.length-1]===o&&(n=n.slice(0,n.length-1)),n}});var ya=v((nd,Ft)=>{"use strict";var Dt=require("path"),pa=xn(),ba=n=>{n={cwd:process.cwd(),path:process.env[pa()],execPath:process.execPath,...n};let r,o=Dt.resolve(n.cwd),a=[];for(;r!==o;)a.push(Dt.join(o,"node_modules/.bin")),r=o,o=Dt.resolve(o,"..");let s=Dt.resolve(n.cwd,n.execPath,"..");return a.push(s),a.concat(n.path).join(Dt.delimiter)};Ft.exports=ba;Ft.exports.default=ba;Ft.exports.env=n=>{n={env:process.env,...n};let r={...n.env},o=pa({env:r});return n.path=r[o],r[o]=Ft.exports(n),r}});var Sa=v((od,Mn)=>{"use strict";var ga=(n,r)=>{for(let o of Reflect.ownKeys(r))Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o));return n};Mn.exports=ga;Mn.exports.default=ga});var wa=v((id,Or)=>{"use strict";var Yl=Sa(),Ir=new WeakMap,_a=(n,r={})=>{if(typeof n!="function")throw new TypeError("Expected a function");let o,a=0,s=n.displayName||n.name||"<anonymous>",l=function(...f){if(Ir.set(l,++a),a===1)o=n.apply(this,f),n=null;else if(r.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return Yl(l,n),Ir.set(l,a),l};Or.exports=_a;Or.exports.default=_a;Or.exports.callCount=n=>{if(!Ir.has(n))throw new Error(`The given function \`${n.name}\` is not wrapped by the \`onetime\` package`);return Ir.get(n)}});var Ra=v(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.SIGNALS=void 0;var Ql=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];xr.SIGNALS=Ql});var jn=v(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.SIGRTMAX=at.getRealtimeSignals=void 0;var Xl=function(){let n=Ea-Ta+1;return Array.from({length:n},Kl)};at.getRealtimeSignals=Xl;var Kl=function(n,r){return{name:`SIGRT${r+1}`,number:Ta+r,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Ta=34,Ea=64;at.SIGRTMAX=Ea});var Ca=v(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.getSignals=void 0;var Zl=require("os"),Jl=Ra(),ec=jn(),tc=function(){let n=(0,ec.getRealtimeSignals)();return[...Jl.SIGNALS,...n].map(rc)};qr.getSignals=tc;var rc=function({name:n,number:r,description:o,action:a,forced:s=!1,standard:l}){let{signals:{[n]:f}}=Zl.constants,p=f!==void 0;return{name:n,number:p?f:r,description:o,supported:p,action:a,forced:s,standard:l}}});var Aa=v(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.signalsByNumber=st.signalsByName=void 0;var nc=require("os"),Pa=Ca(),oc=jn(),ic=function(){return(0,Pa.getSignals)().reduce(ac,{})},ac=function(n,{name:r,number:o,description:a,supported:s,action:l,forced:f,standard:p}){return{...n,[r]:{name:r,number:o,description:a,supported:s,action:l,forced:f,standard:p}}},sc=ic();st.signalsByName=sc;var uc=function(){let n=(0,Pa.getSignals)(),r=oc.SIGRTMAX+1,o=Array.from({length:r},(a,s)=>lc(s,n));return Object.assign({},...o)},lc=function(n,r){let o=cc(n,r);if(o===void 0)return{};let{name:a,description:s,supported:l,action:f,forced:p,standard:m}=o;return{[n]:{name:a,number:n,description:s,supported:l,action:f,forced:p,standard:m}}},cc=function(n,r){let o=r.find(({name:a})=>nc.constants.signals[a]===n);return o!==void 0?o:r.find(a=>a.number===n)},fc=uc();st.signalsByNumber=fc});var Ba=v((cd,va)=>{"use strict";var{signalsByName:dc}=Aa(),hc=({timedOut:n,timeout:r,errorCode:o,signal:a,signalDescription:s,exitCode:l,isCanceled:f})=>n?`timed out after ${r} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:a!==void 0?`was killed with ${a} (${s})`:l!==void 0?`failed with exit code ${l}`:"failed",mc=({stdout:n,stderr:r,all:o,error:a,signal:s,exitCode:l,command:f,escapedCommand:p,timedOut:m,isCanceled:y,killed:R,parsed:{options:{timeout:T}}})=>{l=l===null?void 0:l,s=s===null?void 0:s;let S=s===void 0?void 0:dc[s].description,g=a&&a.code,E=`Command ${hc({timedOut:m,timeout:T,errorCode:g,signal:s,signalDescription:S,exitCode:l,isCanceled:y})}: ${f}`,P=Object.prototype.toString.call(a)==="[object Error]",B=P?`${E}
${a.message}`:E,x=[B,r,n].filter(Boolean).join(`
`);return P?(a.originalMessage=a.message,a.message=x):a=new Error(x),a.shortMessage=B,a.command=f,a.escapedCommand=p,a.exitCode=l,a.signal=s,a.signalDescription=S,a.stdout=n,a.stderr=r,o!==void 0&&(a.all=o),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=Boolean(m),a.isCanceled=y,a.killed=R&&!m,a};va.exports=mc});var Ia=v((fd,Nn)=>{"use strict";var Wr=["stdin","stdout","stderr"],pc=n=>Wr.some(r=>n[r]!==void 0),ka=n=>{if(!n)return;let{stdio:r}=n;if(r===void 0)return Wr.map(a=>n[a]);if(pc(n))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Wr.map(a=>`\`${a}\``).join(", ")}`);if(typeof r=="string")return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);let o=Math.max(r.length,Wr.length);return Array.from({length:o},(a,s)=>r[s])};Nn.exports=ka;Nn.exports.node=n=>{let r=ka(n);return r==="ipc"?"ipc":r===void 0||typeof r=="string"?[r,r,r,"ipc"]:r.includes("ipc")?r:[...r,"ipc"]}});var Oa=v((dd,Dr)=>{Dr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Dr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Dr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Fa=v((hd,ct)=>{var L=global.process,Le=function(n){return n&&typeof n=="object"&&typeof n.removeListener=="function"&&typeof n.emit=="function"&&typeof n.reallyExit=="function"&&typeof n.listeners=="function"&&typeof n.kill=="function"&&typeof n.pid=="number"&&typeof n.on=="function"};Le(L)?(xa=require("assert"),ut=Oa(),qa=/^win/i.test(L.platform),Lt=require("events"),typeof Lt!="function"&&(Lt=Lt.EventEmitter),L.__signal_exit_emitter__?j=L.__signal_exit_emitter__:(j=L.__signal_exit_emitter__=new Lt,j.count=0,j.emitted={}),j.infinite||(j.setMaxListeners(1/0),j.infinite=!0),ct.exports=function(n,r){if(!!Le(global.process)){xa.equal(typeof n,"function","a callback must be provided for exit handler"),lt===!1&&Un();var o="exit";r&&r.alwaysLast&&(o="afterexit");var a=function(){j.removeListener(o,n),j.listeners("exit").length===0&&j.listeners("afterexit").length===0&&Fr()};return j.on(o,n),a}},Fr=function(){!lt||!Le(global.process)||(lt=!1,ut.forEach(function(r){try{L.removeListener(r,Lr[r])}catch{}}),L.emit=zr,L.reallyExit=Hn,j.count-=1)},ct.exports.unload=Fr,ze=function(r,o,a){j.emitted[r]||(j.emitted[r]=!0,j.emit(r,o,a))},Lr={},ut.forEach(function(n){Lr[n]=function(){if(!!Le(global.process)){var o=L.listeners(n);o.length===j.count&&(Fr(),ze("exit",null,n),ze("afterexit",null,n),qa&&n==="SIGHUP"&&(n="SIGINT"),L.kill(L.pid,n))}}}),ct.exports.signals=function(){return ut},lt=!1,Un=function(){lt||!Le(global.process)||(lt=!0,j.count+=1,ut=ut.filter(function(r){try{return L.on(r,Lr[r]),!0}catch{return!1}}),L.emit=Da,L.reallyExit=Wa)},ct.exports.load=Un,Hn=L.reallyExit,Wa=function(r){!Le(global.process)||(L.exitCode=r||0,ze("exit",L.exitCode,null),ze("afterexit",L.exitCode,null),Hn.call(L,L.exitCode))},zr=L.emit,Da=function(r,o){if(r==="exit"&&Le(global.process)){o!==void 0&&(L.exitCode=o);var a=zr.apply(this,arguments);return ze("exit",L.exitCode,null),ze("afterexit",L.exitCode,null),a}else return zr.apply(this,arguments)}):ct.exports=function(){};var xa,ut,qa,Lt,j,Fr,ze,Lr,lt,Un,Hn,Wa,zr,Da});var za=v((md,La)=>{"use strict";var bc=require("os"),yc=Fa(),gc=1e3*5,Sc=(n,r="SIGTERM",o={})=>{let a=n(r);return _c(n,r,o,a),a},_c=(n,r,o,a)=>{if(!wc(r,o,a))return;let s=Tc(o),l=setTimeout(()=>{n("SIGKILL")},s);l.unref&&l.unref()},wc=(n,{forceKillAfterTimeout:r},o)=>Rc(n)&&r!==!1&&o,Rc=n=>n===bc.constants.signals.SIGTERM||typeof n=="string"&&n.toUpperCase()==="SIGTERM",Tc=({forceKillAfterTimeout:n=!0})=>{if(n===!0)return gc;if(!Number.isFinite(n)||n<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`);return n},Ec=(n,r)=>{n.kill()&&(r.isCanceled=!0)},Cc=(n,r,o)=>{n.kill(r),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:r}))},Pc=(n,{timeout:r,killSignal:o="SIGTERM"},a)=>{if(r===0||r===void 0)return a;let s,l=new Promise((p,m)=>{s=setTimeout(()=>{Cc(n,o,m)},r)}),f=a.finally(()=>{clearTimeout(s)});return Promise.race([l,f])},Ac=({timeout:n})=>{if(n!==void 0&&(!Number.isFinite(n)||n<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`)},vc=async(n,{cleanup:r,detached:o},a)=>{if(!r||o)return a;let s=yc(()=>{n.kill()});return a.finally(()=>{s()})};La.exports={spawnedKill:Sc,spawnedCancel:Ec,setupTimeout:Pc,validateTimeout:Ac,setExitHandler:vc}});var Ma=v((pd,$a)=>{"use strict";var de=n=>n!==null&&typeof n=="object"&&typeof n.pipe=="function";de.writable=n=>de(n)&&n.writable!==!1&&typeof n._write=="function"&&typeof n._writableState=="object";de.readable=n=>de(n)&&n.readable!==!1&&typeof n._read=="function"&&typeof n._readableState=="object";de.duplex=n=>de.writable(n)&&de.readable(n);de.transform=n=>de.duplex(n)&&typeof n._transform=="function";$a.exports=de});var Na=v((bd,ja)=>{"use strict";var{PassThrough:Bc}=require("stream");ja.exports=n=>{n={...n};let{array:r}=n,{encoding:o}=n,a=o==="buffer",s=!1;r?s=!(o||a):o=o||"utf8",a&&(o=null);let l=new Bc({objectMode:s});o&&l.setEncoding(o);let f=0,p=[];return l.on("data",m=>{p.push(m),s?f=p.length:f+=m.length}),l.getBufferedValue=()=>r?p:a?Buffer.concat(p,f):p.join(""),l.getBufferedLength=()=>f,l}});var Ua=v((yd,zt)=>{"use strict";var{constants:kc}=require("buffer"),Ic=require("stream"),{promisify:Oc}=require("util"),xc=Na(),qc=Oc(Ic.pipeline),Gn=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function Vn(n,r){if(!n)throw new Error("Expected a stream");r={maxBuffer:1/0,...r};let{maxBuffer:o}=r,a=xc(r);return await new Promise((s,l)=>{let f=p=>{p&&a.getBufferedLength()<=kc.MAX_LENGTH&&(p.bufferedData=a.getBufferedValue()),l(p)};(async()=>{try{await qc(n,a),s()}catch(p){f(p)}})(),a.on("data",()=>{a.getBufferedLength()>o&&f(new Gn)})}),a.getBufferedValue()}zt.exports=Vn;zt.exports.buffer=(n,r)=>Vn(n,{...r,encoding:"buffer"});zt.exports.array=(n,r)=>Vn(n,{...r,array:!0});zt.exports.MaxBufferError=Gn});var Ga=v((gd,Ha)=>{"use strict";var{PassThrough:Wc}=require("stream");Ha.exports=function(){var n=[],r=new Wc({objectMode:!0});return r.setMaxListeners(0),r.add=o,r.isEmpty=a,r.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),r;function o(l){return Array.isArray(l)?(l.forEach(o),this):(n.push(l),l.once("end",s.bind(null,l)),l.once("error",r.emit.bind(r,"error")),l.pipe(r,{end:!1}),this)}function a(){return n.length==0}function s(l){n=n.filter(function(f){return f!==l}),!n.length&&r.readable&&r.end()}}});var Xa=v((Sd,Qa)=>{"use strict";var Va=Ma(),Ya=Ua(),Dc=Ga(),Fc=(n,r)=>{r===void 0||n.stdin===void 0||(Va(r)?r.pipe(n.stdin):n.stdin.end(r))},Lc=(n,{all:r})=>{if(!r||!n.stdout&&!n.stderr)return;let o=Dc();return n.stdout&&o.add(n.stdout),n.stderr&&o.add(n.stderr),o},Yn=async(n,r)=>{if(!!n){n.destroy();try{return await r}catch(o){return o.bufferedData}}},Qn=(n,{encoding:r,buffer:o,maxBuffer:a})=>{if(!(!n||!o))return r?Ya(n,{encoding:r,maxBuffer:a}):Ya.buffer(n,{maxBuffer:a})},zc=async({stdout:n,stderr:r,all:o},{encoding:a,buffer:s,maxBuffer:l},f)=>{let p=Qn(n,{encoding:a,buffer:s,maxBuffer:l}),m=Qn(r,{encoding:a,buffer:s,maxBuffer:l}),y=Qn(o,{encoding:a,buffer:s,maxBuffer:l*2});try{return await Promise.all([f,p,m,y])}catch(R){return Promise.all([{error:R,signal:R.signal,timedOut:R.timedOut},Yn(n,p),Yn(r,m),Yn(o,y)])}},$c=({input:n})=>{if(Va(n))throw new TypeError("The `input` option cannot be a stream in sync mode")};Qa.exports={handleInput:Fc,makeAllStream:Lc,getSpawnedResult:zc,validateInputSync:$c}});var Za=v((_d,Ka)=>{"use strict";var Mc=(async()=>{})().constructor.prototype,jc=["then","catch","finally"].map(n=>[n,Reflect.getOwnPropertyDescriptor(Mc,n)]),Nc=(n,r)=>{for(let[o,a]of jc){let s=typeof r=="function"?(...l)=>Reflect.apply(a.value,r(),l):a.value.bind(r);Reflect.defineProperty(n,o,{...a,value:s})}return n},Uc=n=>new Promise((r,o)=>{n.on("exit",(a,s)=>{r({exitCode:a,signal:s})}),n.on("error",a=>{o(a)}),n.stdin&&n.stdin.on("error",a=>{o(a)})});Ka.exports={mergePromise:Nc,getSpawnedPromise:Uc}});var ts=v((wd,es)=>{"use strict";var Ja=(n,r=[])=>Array.isArray(r)?[n,...r]:[n],Hc=/^[\w.-]+$/,Gc=/"/g,Vc=n=>typeof n!="string"||Hc.test(n)?n:`"${n.replace(Gc,'\\"')}"`,Yc=(n,r)=>Ja(n,r).join(" "),Qc=(n,r)=>Ja(n,r).map(o=>Vc(o)).join(" "),Xc=/ +/g,Kc=n=>{let r=[];for(let o of n.trim().split(Xc)){let a=r[r.length-1];a&&a.endsWith("\\")?r[r.length-1]=`${a.slice(0,-1)} ${o}`:r.push(o)}return r};es.exports={joinCommand:Yc,getEscapedCommand:Qc,parseCommand:Kc}});var us=v((Rd,ft)=>{"use strict";var Zc=require("path"),Xn=require("child_process"),Jc=da(),ef=ma(),tf=ya(),rf=wa(),$r=Ba(),rs=Ia(),{spawnedKill:nf,spawnedCancel:of,setupTimeout:af,validateTimeout:sf,setExitHandler:uf}=za(),{handleInput:lf,getSpawnedResult:cf,makeAllStream:ff,validateInputSync:df}=Xa(),{mergePromise:ns,getSpawnedPromise:hf}=Za(),{joinCommand:os,parseCommand:is,getEscapedCommand:as}=ts(),mf=1e3*1e3*100,pf=({env:n,extendEnv:r,preferLocal:o,localDir:a,execPath:s})=>{let l=r?{...process.env,...n}:n;return o?tf.env({env:l,cwd:a,execPath:s}):l},ss=(n,r,o={})=>{let a=Jc._parse(n,r,o);return n=a.command,r=a.args,o=a.options,o={maxBuffer:mf,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=pf(o),o.stdio=rs(o),process.platform==="win32"&&Zc.basename(n,".exe")==="cmd"&&r.unshift("/q"),{file:n,args:r,options:o,parsed:a}},$t=(n,r,o)=>typeof r!="string"&&!Buffer.isBuffer(r)?o===void 0?void 0:"":n.stripFinalNewline?ef(r):r,Mr=(n,r,o)=>{let a=ss(n,r,o),s=os(n,r),l=as(n,r);sf(a.options);let f;try{f=Xn.spawn(a.file,a.args,a.options)}catch(g){let b=new Xn.ChildProcess,E=Promise.reject($r({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:l,parsed:a,timedOut:!1,isCanceled:!1,killed:!1}));return ns(b,E)}let p=hf(f),m=af(f,a.options,p),y=uf(f,a.options,m),R={isCanceled:!1};f.kill=nf.bind(null,f.kill.bind(f)),f.cancel=of.bind(null,f,R);let S=rf(async()=>{let[{error:g,exitCode:b,signal:E,timedOut:P},B,x,U]=await cf(f,a.options,y),z=$t(a.options,B),$=$t(a.options,x),F=$t(a.options,U);if(g||b!==0||E!==null){let ne=$r({error:g,exitCode:b,signal:E,stdout:z,stderr:$,all:F,command:s,escapedCommand:l,parsed:a,timedOut:P,isCanceled:R.isCanceled,killed:f.killed});if(!a.options.reject)return ne;throw ne}return{command:s,escapedCommand:l,exitCode:0,stdout:z,stderr:$,all:F,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return lf(f,a.options.input),f.all=ff(f,a.options),ns(f,S)};ft.exports=Mr;ft.exports.sync=(n,r,o)=>{let a=ss(n,r,o),s=os(n,r),l=as(n,r);df(a.options);let f;try{f=Xn.spawnSync(a.file,a.args,a.options)}catch(y){throw $r({error:y,stdout:"",stderr:"",all:"",command:s,escapedCommand:l,parsed:a,timedOut:!1,isCanceled:!1,killed:!1})}let p=$t(a.options,f.stdout,f.error),m=$t(a.options,f.stderr,f.error);if(f.error||f.status!==0||f.signal!==null){let y=$r({stdout:p,stderr:m,error:f.error,signal:f.signal,exitCode:f.status,command:s,escapedCommand:l,parsed:a,timedOut:f.error&&f.error.code==="ETIMEDOUT",isCanceled:!1,killed:f.signal!==null});if(!a.options.reject)return y;throw y}return{command:s,escapedCommand:l,exitCode:0,stdout:p,stderr:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};ft.exports.command=(n,r)=>{let[o,...a]=is(n);return Mr(o,a,r)};ft.exports.commandSync=(n,r)=>{let[o,...a]=is(n);return Mr.sync(o,a,r)};ft.exports.node=(n,r,o={})=>{r&&!Array.isArray(r)&&typeof r=="object"&&(o=r,r=[]);let a=rs.node(o),s=process.execArgv.filter(p=>!p.startsWith("--inspect")),{nodePath:l=process.execPath,nodeOptions:f=s}=o;return Mr(l,[...f,n,...Array.isArray(r)?r:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:a,shell:!1})}});var ms=v((jr,hs)=>{(function(n,r){typeof jr=="object"&&typeof hs!="undefined"?r(jr):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis!="undefined"?globalThis:n||self,r(n.WebStreamsPolyfill={}))})(jr,function(n){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function a(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global}let s=a();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,p=Promise,m=Promise.prototype.then,y=Promise.resolve.bind(p),R=Promise.reject.bind(p);function T(e){return new p(e)}function S(e){return y(e)}function g(e){return R(e)}function b(e,t,i){return m.call(e,t,i)}function E(e,t,i){b(b(e,t,i),void 0,f)}function P(e,t){E(e,t)}function B(e,t){E(e,void 0,t)}function x(e,t,i){return b(e,t,i)}function U(e){b(e,void 0,f)}let z=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let t=S(void 0);return i=>b(t,i)})();function $(e,t,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,i)}function F(e,t,i){try{return S($(e,t,i))}catch(u){return g(u)}}let ne=16384;class oe{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let i=this._back,u=i;i._elements.length===ne-1&&(u={_elements:[],_next:void 0}),i._elements.push(t),u!==i&&(this._back=u,i._next=u),++this._size}shift(){let t=this._front,i=t,u=this._cursor,c=u+1,d=t._elements,h=d[u];return c===ne&&(i=t._next,c=0),--this._size,this._cursor=c,t!==i&&(this._front=i),d[u]=void 0,h}forEach(t){let i=this._cursor,u=this._front,c=u._elements;for(;(i!==c.length||u._next!==void 0)&&!(i===c.length&&(u=u._next,c=u._elements,i=0,c.length===0));)t(c[i]),++i}peek(){let t=this._front,i=this._cursor;return t._elements[i]}}function ao(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Jr(e):t._state==="closed"?Hs(e):so(e,t._storedError)}function Zr(e,t){let i=e._ownerReadableStream;return se(i,t)}function me(e){e._ownerReadableStream._state==="readable"?en(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Gs(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Ge(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Jr(e){e._closedPromise=T((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i})}function so(e,t){Jr(e),en(e,t)}function Hs(e){Jr(e),uo(e)}function en(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Gs(e,t){so(e,t)}function uo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let lo=r("[[AbortSteps]]"),co=r("[[ErrorSteps]]"),tn=r("[[CancelSteps]]"),rn=r("[[PullSteps]]"),fo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Vs=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Ys(e){return typeof e=="object"||typeof e=="function"}function pe(e,t){if(e!==void 0&&!Ys(e))throw new TypeError(`${t} is not an object.`)}function ie(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function Qs(e){return typeof e=="object"&&e!==null||typeof e=="function"}function ho(e,t){if(!Qs(e))throw new TypeError(`${t} is not an object.`)}function be(e,t,i){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${i}'.`)}function nn(e,t,i){if(e===void 0)throw new TypeError(`${t} is required in '${i}'.`)}function on(e){return Number(e)}function mo(e){return e===0?0:e}function Xs(e){return mo(Vs(e))}function po(e,t){let i=0,u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=mo(c),!fo(c))throw new TypeError(`${t} is not a finite number`);if(c=Xs(c),c<i||c>u)throw new TypeError(`${t} is outside the accepted range of ${i} to ${u}, inclusive`);return!fo(c)||c===0?0:c}function an(e,t){if(!Pe(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Ve(e){return new St(e)}function bo(e,t){e._reader._readRequests.push(t)}function sn(e,t,i){let c=e._reader._readRequests.shift();i?c._closeSteps():c._chunkSteps(t)}function Kt(e){return e._reader._readRequests.length}function yo(e){let t=e._reader;return!(t===void 0||!Re(t))}class St{constructor(t){if(be(t,1,"ReadableStreamDefaultReader"),an(t,"First parameter"),Ae(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ao(this,t),this._readRequests=new oe}get closed(){return Re(this)?this._closedPromise:g(Zt("closed"))}cancel(t=void 0){return Re(this)?this._ownerReadableStream===void 0?g(Ge("cancel")):Zr(this,t):g(Zt("cancel"))}read(){if(!Re(this))return g(Zt("read"));if(this._ownerReadableStream===void 0)return g(Ge("read from"));let t,i,u=T((d,h)=>{t=d,i=h});return _t(this,{_chunkSteps:d=>t({value:d,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:d=>i(d)}),u}releaseLock(){if(!Re(this))throw Zt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(St.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(St.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Re(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof St}function _t(e,t){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?t._closeSteps():i._state==="errored"?t._errorSteps(i._storedError):i._readableStreamController[rn](t)}function Zt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let go=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class So{constructor(t,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=i}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?x(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let i=()=>this._returnSteps(t);return this._ongoingPromise?x(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return g(Ge("iterate"));let i,u,c=T((h,_)=>{i=h,u=_});return _t(t,{_chunkSteps:h=>{this._ongoingPromise=void 0,z(()=>i({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,me(t),i({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,me(t),u(h)}}),c}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return g(Ge("finish iterating"));if(!this._preventCancel){let u=Zr(i,t);return me(i),x(u,()=>({value:t,done:!0}))}return me(i),S({value:t,done:!0})}}let _o={next(){return wo(this)?this._asyncIteratorImpl.next():g(Ro("next"))},return(e){return wo(this)?this._asyncIteratorImpl.return(e):g(Ro("return"))}};go!==void 0&&Object.setPrototypeOf(_o,go);function Ks(e,t){let i=Ve(e),u=new So(i,t),c=Object.create(_o);return c._asyncIteratorImpl=u,c}function wo(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof So}catch{return!1}}function Ro(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let To=Number.isNaN||function(e){return e!==e};function wt(e){return e.slice()}function Eo(e,t,i,u,c){new Uint8Array(e).set(new Uint8Array(i,u,c),t)}function Rt(e){return e}function Jt(e){return!1}function Co(e,t,i){if(e.slice)return e.slice(t,i);let u=i-t,c=new ArrayBuffer(u);return Eo(c,0,e,t,u),c}function Zs(e){return!(typeof e!="number"||To(e)||e<0)}function Po(e){let t=Co(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function un(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ln(e,t,i){if(!Zs(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:i}),e._queueTotalSize+=i}function Js(e){return e._queue.peek().value}function Te(e){e._queue=new oe,e._queueTotalSize=0}class Tt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!cn(this))throw mn("view");return this._view}respond(t){if(!cn(this))throw mn("respond");if(be(t,1,"respond"),t=po(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(this._view.buffer),or(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!cn(this))throw mn("respondWithNewView");if(be(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(t.buffer),ir(this._associatedReadableByteStreamController,t)}}Object.defineProperties(Tt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ye{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Oe(this))throw Ct("byobRequest");return hn(this)}get desiredSize(){if(!Oe(this))throw Ct("desiredSize");return qo(this)}close(){if(!Oe(this))throw Ct("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);Et(this)}enqueue(t){if(!Oe(this))throw Ct("enqueue");if(be(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);nr(this,t)}error(t=void 0){if(!Oe(this))throw Ct("error");ae(this,t)}[tn](t){Ao(this),Te(this);let i=this._cancelAlgorithm(t);return rr(this),i}[rn](t){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Io(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);t._chunkSteps(d);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(h){t._errorSteps(h);return}let d={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}bo(i,t),xe(this)}}Object.defineProperties(Ye.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ye.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Oe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Ye}function cn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Tt}function xe(e){if(!nu(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();E(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,xe(e))},u=>{ae(e,u)})}function Ao(e){dn(e),e._pendingPullIntos=new oe}function fn(e,t){let i=!1;e._state==="closed"&&(i=!0);let u=vo(t);t.readerType==="default"?sn(e,u,i):au(e,u,i)}function vo(e){let t=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/i)}function er(e,t,i,u){e._queue.push({buffer:t,byteOffset:i,byteLength:u}),e._queueTotalSize+=u}function Bo(e,t){let i=t.elementSize,u=t.bytesFilled-t.bytesFilled%i,c=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),d=t.bytesFilled+c,h=d-d%i,_=c,C=!1;h>u&&(_=h-t.bytesFilled,C=!0);let k=e._queue;for(;_>0;){let I=k.peek(),O=Math.min(_,I.byteLength),M=t.byteOffset+t.bytesFilled;Eo(t.buffer,M,I.buffer,I.byteOffset,O),I.byteLength===O?k.shift():(I.byteOffset+=O,I.byteLength-=O),e._queueTotalSize-=O,ko(e,O,t),_-=O}return C}function ko(e,t,i){i.bytesFilled+=t}function Io(e){e._queueTotalSize===0&&e._closeRequested?(rr(e),xt(e._controlledReadableByteStream)):xe(e)}function dn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Oo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();Bo(e,t)&&(tr(e),fn(e._controlledReadableByteStream,t))}}function eu(e,t,i){let u=e._controlledReadableByteStream,c=1;t.constructor!==DataView&&(c=t.constructor.BYTES_PER_ELEMENT);let d=t.constructor,h=Rt(t.buffer),_={buffer:h,bufferByteLength:h.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Fo(u,i);return}if(u._state==="closed"){let C=new d(_.buffer,_.byteOffset,0);i._closeSteps(C);return}if(e._queueTotalSize>0){if(Bo(e,_)){let C=vo(_);Io(e),i._chunkSteps(C);return}if(e._closeRequested){let C=new TypeError("Insufficient bytes to fill elements in the given buffer");ae(e,C),i._errorSteps(C);return}}e._pendingPullIntos.push(_),Fo(u,i),xe(e)}function tu(e,t){let i=e._controlledReadableByteStream;if(pn(i))for(;Lo(i)>0;){let u=tr(e);fn(i,u)}}function ru(e,t,i){if(ko(e,t,i),i.bytesFilled<i.elementSize)return;tr(e);let u=i.bytesFilled%i.elementSize;if(u>0){let c=i.byteOffset+i.bytesFilled,d=Co(i.buffer,c-u,c);er(e,d,0,d.byteLength)}i.bytesFilled-=u,fn(e._controlledReadableByteStream,i),Oo(e)}function xo(e,t){let i=e._pendingPullIntos.peek();dn(e),e._controlledReadableByteStream._state==="closed"?tu(e):ru(e,t,i),xe(e)}function tr(e){return e._pendingPullIntos.shift()}function nu(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(yo(t)&&Kt(t)>0||pn(t)&&Lo(t)>0||qo(e)>0)}function rr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Et(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ae(e,u),u}rr(e),xt(t)}}function nr(e,t){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let u=t.buffer,c=t.byteOffset,d=t.byteLength,h=Rt(u);if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();Jt(_.buffer),_.buffer=Rt(_.buffer)}if(dn(e),yo(i))if(Kt(i)===0)er(e,h,c,d);else{e._pendingPullIntos.length>0&&tr(e);let _=new Uint8Array(h,c,d);sn(i,_,!1)}else pn(i)?(er(e,h,c,d),Oo(e)):er(e,h,c,d);xe(e)}function ae(e,t){let i=e._controlledReadableByteStream;i._state==="readable"&&(Ao(e),Te(e),rr(e),ui(i,t))}function hn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),i=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),u=Object.create(Tt.prototype);iu(u,e,i),e._byobRequest=u}return e._byobRequest}function qo(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function or(e,t){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+t>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=Rt(i.buffer),xo(e,t)}function ir(e,t){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+t.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=t.byteLength;i.buffer=Rt(t.buffer),xo(e,c)}function Wo(e,t,i,u,c,d,h){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Te(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,t._autoAllocateChunkSize=h,t._pendingPullIntos=new oe,e._readableStreamController=t;let _=i();E(S(_),()=>{t._started=!0,xe(t)},C=>{ae(t,C)})}function ou(e,t,i){let u=Object.create(Ye.prototype),c=()=>{},d=()=>S(void 0),h=()=>S(void 0);t.start!==void 0&&(c=()=>t.start(u)),t.pull!==void 0&&(d=()=>t.pull(u)),t.cancel!==void 0&&(h=C=>t.cancel(C));let _=t.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Wo(e,u,c,d,h,i,_)}function iu(e,t,i){e._associatedReadableByteStreamController=t,e._view=i}function mn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ct(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Do(e){return new Pt(e)}function Fo(e,t){e._reader._readIntoRequests.push(t)}function au(e,t,i){let c=e._reader._readIntoRequests.shift();i?c._closeSteps(t):c._chunkSteps(t)}function Lo(e){return e._reader._readIntoRequests.length}function pn(e){let t=e._reader;return!(t===void 0||!qe(t))}class Pt{constructor(t){if(be(t,1,"ReadableStreamBYOBReader"),an(t,"First parameter"),Ae(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Oe(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ao(this,t),this._readIntoRequests=new oe}get closed(){return qe(this)?this._closedPromise:g(ar("closed"))}cancel(t=void 0){return qe(this)?this._ownerReadableStream===void 0?g(Ge("cancel")):Zr(this,t):g(ar("cancel"))}read(t){if(!qe(this))return g(ar("read"));if(!ArrayBuffer.isView(t))return g(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Jt(t.buffer),this._ownerReadableStream===void 0)return g(Ge("read from"));let i,u,c=T((h,_)=>{i=h,u=_});return zo(this,t,{_chunkSteps:h=>i({value:h,done:!1}),_closeSteps:h=>i({value:h,done:!0}),_errorSteps:h=>u(h)}),c}releaseLock(){if(!qe(this))throw ar("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(Pt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function qe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Pt}function zo(e,t,i){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?i._errorSteps(u._storedError):eu(u._readableStreamController,t,i)}function ar(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function At(e,t){let{highWaterMark:i}=e;if(i===void 0)return t;if(To(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function sr(e){let{size:t}=e;return t||(()=>1)}function ur(e,t){pe(e,t);let i=e==null?void 0:e.highWaterMark,u=e==null?void 0:e.size;return{highWaterMark:i===void 0?void 0:on(i),size:u===void 0?void 0:su(u,`${t} has member 'size' that`)}}function su(e,t){return ie(e,t),i=>on(e(i))}function uu(e,t){pe(e,t);let i=e==null?void 0:e.abort,u=e==null?void 0:e.close,c=e==null?void 0:e.start,d=e==null?void 0:e.type,h=e==null?void 0:e.write;return{abort:i===void 0?void 0:lu(i,e,`${t} has member 'abort' that`),close:u===void 0?void 0:cu(u,e,`${t} has member 'close' that`),start:c===void 0?void 0:fu(c,e,`${t} has member 'start' that`),write:h===void 0?void 0:du(h,e,`${t} has member 'write' that`),type:d}}function lu(e,t,i){return ie(e,i),u=>F(e,t,[u])}function cu(e,t,i){return ie(e,i),()=>F(e,t,[])}function fu(e,t,i){return ie(e,i),u=>$(e,t,[u])}function du(e,t,i){return ie(e,i),(u,c)=>F(e,t,[u,c])}function $o(e,t){if(!Qe(e))throw new TypeError(`${t} is not a WritableStream.`)}function hu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let mu=typeof AbortController=="function";function pu(){if(mu)return new AbortController}class vt{constructor(t={},i={}){t===void 0?t=null:ho(t,"First parameter");let u=ur(i,"Second parameter"),c=uu(t,"First parameter");if(jo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=sr(u),_=At(u,1);Bu(this,c,_,h)}get locked(){if(!Qe(this))throw hr("locked");return Xe(this)}abort(t=void 0){return Qe(this)?Xe(this)?g(new TypeError("Cannot abort a stream that already has a writer")):lr(this,t):g(hr("abort"))}close(){return Qe(this)?Xe(this)?g(new TypeError("Cannot close a stream that already has a writer")):fe(this)?g(new TypeError("Cannot close an already-closing stream")):No(this):g(hr("close"))}getWriter(){if(!Qe(this))throw hr("getWriter");return Mo(this)}}Object.defineProperties(vt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Mo(e){return new Bt(e)}function bu(e,t,i,u,c=1,d=()=>1){let h=Object.create(vt.prototype);jo(h);let _=Object.create(Ke.prototype);return Qo(h,_,e,t,i,u,c,d),h}function jo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new oe,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Qe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof vt}function Xe(e){return e._writer!==void 0}function lr(e,t){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=t,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let u=e._state;if(u==="closed"||u==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,t=void 0);let d=T((h,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:_,_reason:t,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||yn(e,t),d}function No(e){let t=e._state;if(t==="closed"||t==="errored")return g(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let i=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),u=e._writer;return u!==void 0&&e._backpressure&&t==="writable"&&Pn(u),ku(e._writableStreamController),i}function yu(e){return T((i,u)=>{let c={_resolve:i,_reject:u};e._writeRequests.push(c)})}function bn(e,t){if(e._state==="writable"){yn(e,t);return}gn(e)}function yn(e,t){let i=e._writableStreamController;e._state="erroring",e._storedError=t;let u=e._writer;u!==void 0&&Ho(u,t),!Ru(e)&&i._started&&gn(e)}function gn(e){e._state="errored",e._writableStreamController[co]();let t=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(t)}),e._writeRequests=new oe,e._pendingAbortRequest===void 0){cr(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(t),cr(e);return}let u=e._writableStreamController[lo](i._reason);E(u,()=>{i._resolve(),cr(e)},c=>{i._reject(c),cr(e)})}function gu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Su(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,bn(e,t)}function _u(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&Jo(i)}function wu(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),bn(e,t)}function fe(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ru(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Tu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Eu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function cr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&En(t,e._storedError)}function Sn(e,t){let i=e._writer;i!==void 0&&t!==e._backpressure&&(t?Fu(i):Pn(i)),e._backpressure=t}class Bt{constructor(t){if(be(t,1,"WritableStreamDefaultWriter"),$o(t,"First parameter"),Xe(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let i=t._state;if(i==="writable")!fe(t)&&t._backpressure?pr(this):ei(this),mr(this);else if(i==="erroring")Cn(this,t._storedError),mr(this);else if(i==="closed")ei(this),Wu(this);else{let u=t._storedError;Cn(this,u),Zo(this,u)}}get closed(){return We(this)?this._closedPromise:g(De("closed"))}get desiredSize(){if(!We(this))throw De("desiredSize");if(this._ownerWritableStream===void 0)throw kt("desiredSize");return vu(this)}get ready(){return We(this)?this._readyPromise:g(De("ready"))}abort(t=void 0){return We(this)?this._ownerWritableStream===void 0?g(kt("abort")):Cu(this,t):g(De("abort"))}close(){if(!We(this))return g(De("close"));let t=this._ownerWritableStream;return t===void 0?g(kt("close")):fe(t)?g(new TypeError("Cannot close an already-closing stream")):Uo(this)}releaseLock(){if(!We(this))throw De("releaseLock");this._ownerWritableStream!==void 0&&Go(this)}write(t=void 0){return We(this)?this._ownerWritableStream===void 0?g(kt("write to")):Vo(this,t):g(De("write"))}}Object.defineProperties(Bt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function We(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Bt}function Cu(e,t){let i=e._ownerWritableStream;return lr(i,t)}function Uo(e){let t=e._ownerWritableStream;return No(t)}function Pu(e){let t=e._ownerWritableStream,i=t._state;return fe(t)||i==="closed"?S(void 0):i==="errored"?g(t._storedError):Uo(e)}function Au(e,t){e._closedPromiseState==="pending"?En(e,t):Du(e,t)}function Ho(e,t){e._readyPromiseState==="pending"?ti(e,t):Lu(e,t)}function vu(e){let t=e._ownerWritableStream,i=t._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:Xo(t._writableStreamController)}function Go(e){let t=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ho(e,i),Au(e,i),t._writer=void 0,e._ownerWritableStream=void 0}function Vo(e,t){let i=e._ownerWritableStream,u=i._writableStreamController,c=Iu(u,t);if(i!==e._ownerWritableStream)return g(kt("write to"));let d=i._state;if(d==="errored")return g(i._storedError);if(fe(i)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(i._storedError);let h=yu(i);return Ou(u,t,c),h}let Yo={};class Ke{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!_n(this))throw Tn("abortReason");return this._abortReason}get signal(){if(!_n(this))throw Tn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!_n(this))throw Tn("error");this._controlledWritableStream._state==="writable"&&Ko(this,t)}[lo](t){let i=this._abortAlgorithm(t);return fr(this),i}[co](){Te(this)}}Object.defineProperties(Ke.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ke.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function _n(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ke}function Qo(e,t,i,u,c,d,h,_){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Te(t),t._abortReason=void 0,t._abortController=pu(),t._started=!1,t._strategySizeAlgorithm=_,t._strategyHWM=h,t._writeAlgorithm=u,t._closeAlgorithm=c,t._abortAlgorithm=d;let C=Rn(t);Sn(e,C);let k=i(),I=S(k);E(I,()=>{t._started=!0,dr(t)},O=>{t._started=!0,bn(e,O)})}function Bu(e,t,i,u){let c=Object.create(Ke.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0),C=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.write!==void 0&&(h=k=>t.write(k,c)),t.close!==void 0&&(_=()=>t.close()),t.abort!==void 0&&(C=k=>t.abort(k)),Qo(e,c,d,h,_,C,i,u)}function fr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ku(e){ln(e,Yo,0),dr(e)}function Iu(e,t){try{return e._strategySizeAlgorithm(t)}catch(i){return wn(e,i),1}}function Xo(e){return e._strategyHWM-e._queueTotalSize}function Ou(e,t,i){try{ln(e,t,i)}catch(c){wn(e,c);return}let u=e._controlledWritableStream;if(!fe(u)&&u._state==="writable"){let c=Rn(e);Sn(u,c)}dr(e)}function dr(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){gn(t);return}if(e._queue.length===0)return;let u=Js(e);u===Yo?xu(e):qu(e,u)}function wn(e,t){e._controlledWritableStream._state==="writable"&&Ko(e,t)}function xu(e){let t=e._controlledWritableStream;Tu(t),un(e);let i=e._closeAlgorithm();fr(e),E(i,()=>{_u(t)},u=>{wu(t,u)})}function qu(e,t){let i=e._controlledWritableStream;Eu(i);let u=e._writeAlgorithm(t);E(u,()=>{gu(i);let c=i._state;if(un(e),!fe(i)&&c==="writable"){let d=Rn(e);Sn(i,d)}dr(e)},c=>{i._state==="writable"&&fr(e),Su(i,c)})}function Rn(e){return Xo(e)<=0}function Ko(e,t){let i=e._controlledWritableStream;fr(e),yn(i,t)}function hr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Tn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function De(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function kt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function mr(e){e._closedPromise=T((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function Zo(e,t){mr(e),En(e,t)}function Wu(e){mr(e),Jo(e)}function En(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Du(e,t){Zo(e,t)}function Jo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function pr(e){e._readyPromise=T((t,i)=>{e._readyPromise_resolve=t,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function Cn(e,t){pr(e),ti(e,t)}function ei(e){pr(e),Pn(e)}function ti(e,t){e._readyPromise_reject!==void 0&&(U(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Fu(e){pr(e)}function Lu(e,t){Cn(e,t)}function Pn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ri=typeof DOMException!="undefined"?DOMException:void 0;function zu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function $u(){let e=function(i,u){this.message=i||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Mu=zu(ri)?ri:$u();function ni(e,t,i,u,c,d){let h=Ve(e),_=Mo(t);e._disturbed=!0;let C=!1,k=S(void 0);return T((I,O)=>{let M;if(d!==void 0){if(M=()=>{let w=new Mu("Aborted","AbortError"),A=[];u||A.push(()=>t._state==="writable"?lr(t,w):S(void 0)),c||A.push(()=>e._state==="readable"?se(e,w):S(void 0)),V(()=>Promise.all(A.map(q=>q())),!0,w)},d.aborted){M();return}d.addEventListener("abort",M)}function ue(){return T((w,A)=>{function q(K){K?w():b(et(),q,A)}q(!1)})}function et(){return C?S(!0):b(_._readyPromise,()=>T((w,A)=>{_t(h,{_chunkSteps:q=>{k=b(Vo(_,q),void 0,o),w(!1)},_closeSteps:()=>w(!0),_errorSteps:A})}))}if(ye(e,h._closedPromise,w=>{u?J(!0,w):V(()=>lr(t,w),!0,w)}),ye(t,_._closedPromise,w=>{c?J(!0,w):V(()=>se(e,w),!0,w)}),H(e,h._closedPromise,()=>{i?J():V(()=>Pu(_))}),fe(t)||t._state==="closed"){let w=new TypeError("the destination writable stream closed before all data could be piped to it");c?J(!0,w):V(()=>se(e,w),!0,w)}U(ue());function ve(){let w=k;return b(k,()=>w!==k?ve():void 0)}function ye(w,A,q){w._state==="errored"?q(w._storedError):B(A,q)}function H(w,A,q){w._state==="closed"?q():P(A,q)}function V(w,A,q){if(C)return;C=!0,t._state==="writable"&&!fe(t)?P(ve(),K):K();function K(){E(w(),()=>ge(A,q),tt=>ge(!0,tt))}}function J(w,A){C||(C=!0,t._state==="writable"&&!fe(t)?P(ve(),()=>ge(w,A)):ge(w,A))}function ge(w,A){Go(_),me(h),d!==void 0&&d.removeEventListener("abort",M),w?O(A):I(void 0)}})}class Ze{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!br(this))throw Sr("desiredSize");return An(this)}close(){if(!br(this))throw Sr("close");if(!Je(this))throw new TypeError("The stream is not in a state that permits close");Ot(this)}enqueue(t=void 0){if(!br(this))throw Sr("enqueue");if(!Je(this))throw new TypeError("The stream is not in a state that permits enqueue");return gr(this,t)}error(t=void 0){if(!br(this))throw Sr("error");Ee(this,t)}[tn](t){Te(this);let i=this._cancelAlgorithm(t);return yr(this),i}[rn](t){let i=this._controlledReadableStream;if(this._queue.length>0){let u=un(this);this._closeRequested&&this._queue.length===0?(yr(this),xt(i)):It(this),t._chunkSteps(u)}else bo(i,t),It(this)}}Object.defineProperties(Ze.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function br(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Ze}function It(e){if(!oi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();E(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,It(e))},u=>{Ee(e,u)})}function oi(e){let t=e._controlledReadableStream;return!Je(e)||!e._started?!1:!!(Ae(t)&&Kt(t)>0||An(e)>0)}function yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ot(e){if(!Je(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(yr(e),xt(t))}function gr(e,t){if(!Je(e))return;let i=e._controlledReadableStream;if(Ae(i)&&Kt(i)>0)sn(i,t,!1);else{let u;try{u=e._strategySizeAlgorithm(t)}catch(c){throw Ee(e,c),c}try{ln(e,t,u)}catch(c){throw Ee(e,c),c}}It(e)}function Ee(e,t){let i=e._controlledReadableStream;i._state==="readable"&&(Te(e),yr(e),ui(i,t))}function An(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function ju(e){return!oi(e)}function Je(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function ii(e,t,i,u,c,d,h){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Te(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=h,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,e._readableStreamController=t;let _=i();E(S(_),()=>{t._started=!0,It(t)},C=>{Ee(t,C)})}function Nu(e,t,i,u){let c=Object.create(Ze.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.pull!==void 0&&(h=()=>t.pull(c)),t.cancel!==void 0&&(_=C=>t.cancel(C)),ii(e,c,d,h,_,i,u)}function Sr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Uu(e,t){return Oe(e._readableStreamController)?Gu(e):Hu(e)}function Hu(e,t){let i=Ve(e),u=!1,c=!1,d=!1,h=!1,_,C,k,I,O,M=T(H=>{O=H});function ue(){return u?(c=!0,S(void 0)):(u=!0,_t(i,{_chunkSteps:V=>{z(()=>{c=!1;let J=V,ge=V;d||gr(k._readableStreamController,J),h||gr(I._readableStreamController,ge),u=!1,c&&ue()})},_closeSteps:()=>{u=!1,d||Ot(k._readableStreamController),h||Ot(I._readableStreamController),(!d||!h)&&O(void 0)},_errorSteps:()=>{u=!1}}),S(void 0))}function et(H){if(d=!0,_=H,h){let V=wt([_,C]),J=se(e,V);O(J)}return M}function ve(H){if(h=!0,C=H,d){let V=wt([_,C]),J=se(e,V);O(J)}return M}function ye(){}return k=vn(ye,ue,et),I=vn(ye,ue,ve),B(i._closedPromise,H=>{Ee(k._readableStreamController,H),Ee(I._readableStreamController,H),(!d||!h)&&O(void 0)}),[k,I]}function Gu(e){let t=Ve(e),i=!1,u=!1,c=!1,d=!1,h=!1,_,C,k,I,O,M=T(w=>{O=w});function ue(w){B(w._closedPromise,A=>{w===t&&(ae(k._readableStreamController,A),ae(I._readableStreamController,A),(!d||!h)&&O(void 0))})}function et(){qe(t)&&(me(t),t=Ve(e),ue(t)),_t(t,{_chunkSteps:A=>{z(()=>{u=!1,c=!1;let q=A,K=A;if(!d&&!h)try{K=Po(A)}catch(tt){ae(k._readableStreamController,tt),ae(I._readableStreamController,tt),O(se(e,tt));return}d||nr(k._readableStreamController,q),h||nr(I._readableStreamController,K),i=!1,u?ye():c&&H()})},_closeSteps:()=>{i=!1,d||Et(k._readableStreamController),h||Et(I._readableStreamController),k._readableStreamController._pendingPullIntos.length>0&&or(k._readableStreamController,0),I._readableStreamController._pendingPullIntos.length>0&&or(I._readableStreamController,0),(!d||!h)&&O(void 0)},_errorSteps:()=>{i=!1}})}function ve(w,A){Re(t)&&(me(t),t=Do(e),ue(t));let q=A?I:k,K=A?k:I;zo(t,w,{_chunkSteps:rt=>{z(()=>{u=!1,c=!1;let nt=A?h:d;if(A?d:h)nt||ir(q._readableStreamController,rt);else{let wi;try{wi=Po(rt)}catch(kn){ae(q._readableStreamController,kn),ae(K._readableStreamController,kn),O(se(e,kn));return}nt||ir(q._readableStreamController,rt),nr(K._readableStreamController,wi)}i=!1,u?ye():c&&H()})},_closeSteps:rt=>{i=!1;let nt=A?h:d,vr=A?d:h;nt||Et(q._readableStreamController),vr||Et(K._readableStreamController),rt!==void 0&&(nt||ir(q._readableStreamController,rt),!vr&&K._readableStreamController._pendingPullIntos.length>0&&or(K._readableStreamController,0)),(!nt||!vr)&&O(void 0)},_errorSteps:()=>{i=!1}})}function ye(){if(i)return u=!0,S(void 0);i=!0;let w=hn(k._readableStreamController);return w===null?et():ve(w._view,!1),S(void 0)}function H(){if(i)return c=!0,S(void 0);i=!0;let w=hn(I._readableStreamController);return w===null?et():ve(w._view,!0),S(void 0)}function V(w){if(d=!0,_=w,h){let A=wt([_,C]),q=se(e,A);O(q)}return M}function J(w){if(h=!0,C=w,d){let A=wt([_,C]),q=se(e,A);O(q)}return M}function ge(){}return k=si(ge,ye,V),I=si(ge,H,J),ue(t),[k,I]}function Vu(e,t){pe(e,t);let i=e,u=i==null?void 0:i.autoAllocateChunkSize,c=i==null?void 0:i.cancel,d=i==null?void 0:i.pull,h=i==null?void 0:i.start,_=i==null?void 0:i.type;return{autoAllocateChunkSize:u===void 0?void 0:po(u,`${t} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:Yu(c,i,`${t} has member 'cancel' that`),pull:d===void 0?void 0:Qu(d,i,`${t} has member 'pull' that`),start:h===void 0?void 0:Xu(h,i,`${t} has member 'start' that`),type:_===void 0?void 0:Ku(_,`${t} has member 'type' that`)}}function Yu(e,t,i){return ie(e,i),u=>F(e,t,[u])}function Qu(e,t,i){return ie(e,i),u=>F(e,t,[u])}function Xu(e,t,i){return ie(e,i),u=>$(e,t,[u])}function Ku(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Zu(e,t){pe(e,t);let i=e==null?void 0:e.mode;return{mode:i===void 0?void 0:Ju(i,`${t} has member 'mode' that`)}}function Ju(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function el(e,t){pe(e,t);let i=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(i)}}function ai(e,t){pe(e,t);let i=e==null?void 0:e.preventAbort,u=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,d=e==null?void 0:e.signal;return d!==void 0&&tl(d,`${t} has member 'signal' that`),{preventAbort:Boolean(i),preventCancel:Boolean(u),preventClose:Boolean(c),signal:d}}function tl(e,t){if(!hu(e))throw new TypeError(`${t} is not an AbortSignal.`)}function rl(e,t){pe(e,t);let i=e==null?void 0:e.readable;nn(i,"readable","ReadableWritablePair"),an(i,`${t} has member 'readable' that`);let u=e==null?void 0:e.writable;return nn(u,"writable","ReadableWritablePair"),$o(u,`${t} has member 'writable' that`),{readable:i,writable:u}}class Ce{constructor(t={},i={}){t===void 0?t=null:ho(t,"First parameter");let u=ur(i,"Second parameter"),c=Vu(t,"First parameter");if(Bn(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=At(u,0);ou(this,c,d)}else{let d=sr(u),h=At(u,1);Nu(this,c,h,d)}}get locked(){if(!Pe(this))throw Fe("locked");return Ae(this)}cancel(t=void 0){return Pe(this)?Ae(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):se(this,t):g(Fe("cancel"))}getReader(t=void 0){if(!Pe(this))throw Fe("getReader");return Zu(t,"First parameter").mode===void 0?Ve(this):Do(this)}pipeThrough(t,i={}){if(!Pe(this))throw Fe("pipeThrough");be(t,1,"pipeThrough");let u=rl(t,"First parameter"),c=ai(i,"Second parameter");if(Ae(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Xe(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=ni(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return U(d),u.readable}pipeTo(t,i={}){if(!Pe(this))return g(Fe("pipeTo"));if(t===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!Qe(t))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=ai(i,"Second parameter")}catch(c){return g(c)}return Ae(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Xe(t)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ni(this,t,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Pe(this))throw Fe("tee");let t=Uu(this);return wt(t)}values(t=void 0){if(!Pe(this))throw Fe("values");let i=el(t,"First parameter");return Ks(this,i.preventCancel)}}Object.defineProperties(Ce.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ce.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Ce.prototype,r.asyncIterator,{value:Ce.prototype.values,writable:!0,configurable:!0});function vn(e,t,i,u=1,c=()=>1){let d=Object.create(Ce.prototype);Bn(d);let h=Object.create(Ze.prototype);return ii(d,h,e,t,i,u,c),d}function si(e,t,i){let u=Object.create(Ce.prototype);Bn(u);let c=Object.create(Ye.prototype);return Wo(u,c,e,t,i,0,void 0),u}function Bn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Pe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ce}function Ae(e){return e._reader!==void 0}function se(e,t){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);xt(e);let i=e._reader;i!==void 0&&qe(i)&&(i._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),i._readIntoRequests=new oe);let u=e._readableStreamController[tn](t);return x(u,o)}function xt(e){e._state="closed";let t=e._reader;t!==void 0&&(uo(t),Re(t)&&(t._readRequests.forEach(i=>{i._closeSteps()}),t._readRequests=new oe))}function ui(e,t){e._state="errored",e._storedError=t;let i=e._reader;i!==void 0&&(en(i,t),Re(i)?(i._readRequests.forEach(u=>{u._errorSteps(t)}),i._readRequests=new oe):(i._readIntoRequests.forEach(u=>{u._errorSteps(t)}),i._readIntoRequests=new oe))}function Fe(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function li(e,t){pe(e,t);let i=e==null?void 0:e.highWaterMark;return nn(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:on(i)}}let ci=e=>e.byteLength;Object.defineProperty(ci,"name",{value:"size",configurable:!0});class _r{constructor(t){be(t,1,"ByteLengthQueuingStrategy"),t=li(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!di(this))throw fi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!di(this))throw fi("size");return ci}}Object.defineProperties(_r.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(_r.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function fi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function di(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof _r}let hi=()=>1;Object.defineProperty(hi,"name",{value:"size",configurable:!0});class wr{constructor(t){be(t,1,"CountQueuingStrategy"),t=li(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!pi(this))throw mi("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!pi(this))throw mi("size");return hi}}Object.defineProperties(wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(wr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function mi(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function pi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof wr}function nl(e,t){pe(e,t);let i=e==null?void 0:e.flush,u=e==null?void 0:e.readableType,c=e==null?void 0:e.start,d=e==null?void 0:e.transform,h=e==null?void 0:e.writableType;return{flush:i===void 0?void 0:ol(i,e,`${t} has member 'flush' that`),readableType:u,start:c===void 0?void 0:il(c,e,`${t} has member 'start' that`),transform:d===void 0?void 0:al(d,e,`${t} has member 'transform' that`),writableType:h}}function ol(e,t,i){return ie(e,i),u=>F(e,t,[u])}function il(e,t,i){return ie(e,i),u=>$(e,t,[u])}function al(e,t,i){return ie(e,i),(u,c)=>F(e,t,[u,c])}class Rr{constructor(t={},i={},u={}){t===void 0&&(t=null);let c=ur(i,"Second parameter"),d=ur(u,"Third parameter"),h=nl(t,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=At(d,0),C=sr(d),k=At(c,1),I=sr(c),O,M=T(ue=>{O=ue});sl(this,M,k,I,_,C),ll(this,h),h.start!==void 0?O(h.start(this._transformStreamController)):O(void 0)}get readable(){if(!bi(this))throw _i("readable");return this._readable}get writable(){if(!bi(this))throw _i("writable");return this._writable}}Object.defineProperties(Rr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function sl(e,t,i,u,c,d){function h(){return t}function _(M){return dl(e,M)}function C(M){return hl(e,M)}function k(){return ml(e)}e._writable=bu(h,_,k,C,i,u);function I(){return pl(e)}function O(M){return Er(e,M),S(void 0)}e._readable=vn(h,I,O,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Cr(e,!0),e._transformStreamController=void 0}function bi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Rr}function Tr(e,t){Ee(e._readable._readableStreamController,t),Er(e,t)}function Er(e,t){yi(e._transformStreamController),wn(e._writable._writableStreamController,t),e._backpressure&&Cr(e,!1)}function Cr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=t}class qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Pr(this))throw Ar("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return An(t)}enqueue(t=void 0){if(!Pr(this))throw Ar("enqueue");gi(this,t)}error(t=void 0){if(!Pr(this))throw Ar("error");cl(this,t)}terminate(){if(!Pr(this))throw Ar("terminate");fl(this)}}Object.defineProperties(qt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Pr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof qt}function ul(e,t,i,u){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=i,t._flushAlgorithm=u}function ll(e,t){let i=Object.create(qt.prototype),u=d=>{try{return gi(i,d),S(void 0)}catch(h){return g(h)}},c=()=>S(void 0);t.transform!==void 0&&(u=d=>t.transform(d,i)),t.flush!==void 0&&(c=()=>t.flush(i)),ul(e,i,u,c)}function yi(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function gi(e,t){let i=e._controlledTransformStream,u=i._readable._readableStreamController;if(!Je(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{gr(u,t)}catch(d){throw Er(i,d),i._readable._storedError}ju(u)!==i._backpressure&&Cr(i,!0)}function cl(e,t){Tr(e._controlledTransformStream,t)}function Si(e,t){let i=e._transformAlgorithm(t);return x(i,void 0,u=>{throw Tr(e._controlledTransformStream,u),u})}function fl(e){let t=e._controlledTransformStream,i=t._readable._readableStreamController;Ot(i);let u=new TypeError("TransformStream terminated");Er(t,u)}function dl(e,t){let i=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return x(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Si(i,t)})}return Si(i,t)}function hl(e,t){return Tr(e,t),S(void 0)}function ml(e){let t=e._readable,i=e._transformStreamController,u=i._flushAlgorithm();return yi(i),x(u,()=>{if(t._state==="errored")throw t._storedError;Ot(t._readableStreamController)},c=>{throw Tr(e,c),t._storedError})}function pl(e){return Cr(e,!1),e._backpressureChangePromise}function Ar(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function _i(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=_r,n.CountQueuingStrategy=wr,n.ReadableByteStreamController=Ye,n.ReadableStream=Ce,n.ReadableStreamBYOBReader=Pt,n.ReadableStreamBYOBRequest=Tt,n.ReadableStreamDefaultController=Ze,n.ReadableStreamDefaultReader=St,n.TransformStream=Rr,n.TransformStreamDefaultController=qt,n.WritableStream=vt,n.WritableStreamDefaultController=Ke,n.WritableStreamDefaultWriter=Bt,Object.defineProperty(n,"__esModule",{value:!0})})});var ps=v(()=>{var yf=65536;if(!globalThis.ReadableStream)try{let n=require("process"),{emitWarning:r}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("stream/web")),n.emitWarning=r}catch(o){throw n.emitWarning=r,o}}catch{Object.assign(globalThis,ms())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let p=await s.slice(a,Math.min(s.size,a+yf)).arrayBuffer();a+=p.byteLength,l.enqueue(new Uint8Array(p)),a===s.size&&l.close()}})})}catch{}});async function*Kn(n,r=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let a=o.byteOffset,s=o.byteOffset+o.byteLength;for(;a!==s;){let l=Math.min(s-a,bs),f=o.buffer.slice(a,a+l);a+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let a=0;for(;a!==o.size;){let l=await o.slice(a,Math.min(o.size,a+bs)).arrayBuffer();a+=l.byteLength,yield new Uint8Array(l)}}}var Ad,bs,_e,Mt,dt,ht,ys,gf,$e,jt=Wt(()=>{Ad=Se(ps(),1);bs=65536;ys=(ht=class{constructor(r=[],o={}){ee(this,_e,[]);ee(this,Mt,"");ee(this,dt,0);if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let a=new TextEncoder;for(let l of r){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof ht?f=l:f=a.encode(l),Y(this,dt,W(this,dt)+(ArrayBuffer.isView(f)?f.byteLength:f.size)),W(this,_e).push(f)}let s=o.type===void 0?"":String(o.type);Y(this,Mt,/^[\x20-\x7E]*$/.test(s)?s:"")}get size(){return W(this,dt)}get type(){return W(this,Mt)}async text(){let r=new TextDecoder,o="";for await(let a of Kn(W(this,_e),!1))o+=r.decode(a,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let a of Kn(W(this,_e),!1))r.set(a,o),o+=a.length;return r.buffer}stream(){let r=Kn(W(this,_e),!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let a=await r.next();a.done?o.close():o.enqueue(a.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,a=""){let{size:s}=this,l=r<0?Math.max(s+r,0):Math.min(r,s),f=o<0?Math.max(s+o,0):Math.min(o,s),p=Math.max(f-l,0),m=W(this,_e),y=[],R=0;for(let S of m){if(R>=p)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(l&&g<=l)l-=g,f-=g;else{let b;ArrayBuffer.isView(S)?(b=S.subarray(l,Math.min(g,f)),R+=b.byteLength):(b=S.slice(l,Math.min(g,f)),R+=b.size),f-=g,y.push(b),l=0}}let T=new ht([],{type:String(a).toLowerCase()});return Y(T,dt,p),Y(T,_e,y),T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}},_e=new WeakMap,Mt=new WeakMap,dt=new WeakMap,ht);Object.defineProperties(ys.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});gf=ys,$e=gf});var Ut,Ht,gs,Sf,_f,Nt,Zn=Wt(()=>{jt();Sf=(gs=class extends $e{constructor(r,o,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,a);ee(this,Ut,0);ee(this,Ht,"");a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||Y(this,Ut,s),Y(this,Ht,String(o))}get name(){return W(this,Ht)}get lastModified(){return W(this,Ut)}get[Symbol.toStringTag](){return"File"}},Ut=new WeakMap,Ht=new WeakMap,gs),_f=Sf,Nt=_f});function ws(n,r=$e){var o=`${Ss()}${Ss()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((l,f)=>typeof l=="string"?a.push(s+Jn(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Jn(f)+`"; filename="${Jn(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),a.push(`--${o}--`),new r(a,{type:"multipart/form-data; boundary="+o})}var Gt,wf,Rf,Ss,Tf,_s,Jn,Me,te,Rs,mt,eo=Wt(()=>{jt();Zn();({toStringTag:Gt,iterator:wf,hasInstance:Rf}=Symbol),Ss=Math.random,Tf="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),_s=(n,r,o)=>(n+="",/^(Blob|File)$/.test(r&&r[Gt])?[(o=o!==void 0?o+"":r[Gt]=="File"?r.name:"blob",n),r.name!==o||r[Gt]=="blob"?new Nt([r],o,r):r]:[n,r+""]),Jn=(n,r)=>(r?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Me=(n,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},mt=(Rs=class{constructor(...r){ee(this,te,[]);if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Gt](){return"FormData"}[wf](){return this.entries()}static[Rf](r){return r&&typeof r=="object"&&r[Gt]==="FormData"&&!Tf.some(o=>typeof r[o]!="function")}append(...r){Me("append",arguments,2),W(this,te).push(_s(...r))}delete(r){Me("delete",arguments,1),r+="",Y(this,te,W(this,te).filter(([o])=>o!==r))}get(r){Me("get",arguments,1),r+="";for(var o=W(this,te),a=o.length,s=0;s<a;s++)if(o[s][0]===r)return o[s][1];return null}getAll(r,o){return Me("getAll",arguments,1),o=[],r+="",W(this,te).forEach(a=>a[0]===r&&o.push(a[1])),o}has(r){return Me("has",arguments,1),r+="",W(this,te).some(o=>o[0]===r)}forEach(r,o){Me("forEach",arguments,1);for(var[a,s]of this)r.call(o,s,a,this)}set(...r){Me("set",arguments,2);var o=[],a=!0;r=_s(...r),W(this,te).forEach(s=>{s[0]===r[0]?a&&(a=!o.push(r)):o.push(s)}),a&&o.push(r),Y(this,te,o)}*entries(){yield*W(this,te)}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}},te=new WeakMap,Rs)});var Yt,Es,Ef,Cf,je,pt,ro,Pf,Cs=Wt(()=>{Yt=require("fs"),Es=require("worker_threads");Zn();jt();({stat:Ef}=Yt.promises),Cf=globalThis.DOMException||(()=>{let n=new Es.MessageChannel().port1,r=new ArrayBuffer(0);try{n.postMessage(r,[r,r])}catch(o){return o.constructor}})(),ro=class{constructor(r){ee(this,je,void 0);ee(this,pt,void 0);Y(this,je,r.path),Y(this,pt,r.start),this.size=r.size,this.lastModified=r.lastModified}slice(r,o){return new ro({path:W(this,je),lastModified:this.lastModified,size:o-r,start:r})}async*stream(){let{mtimeMs:r}=await Ef(W(this,je));if(r>this.lastModified)throw new Cf("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Yt.createReadStream)(W(this,je),{start:W(this,pt),end:W(this,pt)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}},Pf=ro;je=new WeakMap,pt=new WeakMap});var vs={};Ti(vs,{toFormData:()=>xf});function Of(n){let r=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",a=o.slice(o.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),a}async function xf(n,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new As(o[1]||o[2]),s,l,f,p,m,y,R=[],T=new mt,S=B=>{f+=P.decode(B,{stream:!0})},g=B=>{R.push(B)},b=()=>{let B=new Nt(R,y,{type:m});T.append(p,B)},E=()=>{T.append(p,f)},P=new TextDecoder("utf-8");P.decode(),a.onPartBegin=function(){a.onPartData=S,a.onPartEnd=E,s="",l="",f="",p="",m="",y=null,R.length=0},a.onHeaderField=function(B){s+=P.decode(B,{stream:!0})},a.onHeaderValue=function(B){l+=P.decode(B,{stream:!0})},a.onHeaderEnd=function(){if(l+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let B=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);B&&(p=B[2]||B[3]||""),y=Of(l),y&&(a.onPartData=g,a.onPartEnd=b)}else s==="content-type"&&(m=l);l="",s=""};for await(let B of n)a.write(B);return a.end(),T}var he,D,Ps,ke,Ur,Hr,Af,Qt,vf,Bf,kf,If,Ne,As,Bs=Wt(()=>{Cs();eo();he=0,D={START_BOUNDARY:he++,HEADER_FIELD_START:he++,HEADER_FIELD:he++,HEADER_VALUE_START:he++,HEADER_VALUE:he++,HEADER_VALUE_ALMOST_DONE:he++,HEADERS_ALMOST_DONE:he++,PART_DATA_START:he++,PART_DATA:he++,END:he++},Ps=1,ke={PART_BOUNDARY:Ps,LAST_BOUNDARY:Ps*=2},Ur=10,Hr=13,Af=32,Qt=45,vf=58,Bf=97,kf=122,If=n=>n|32,Ne=()=>{},As=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=Ne,this.onHeaderField=Ne,this.onHeadersEnd=Ne,this.onHeaderValue=Ne,this.onPartBegin=Ne,this.onPartData=Ne,this.onPartEnd=Ne,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a),this.boundaryChars[o[a]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=D.START_BOUNDARY}write(r){let o=0,a=r.length,s=this.index,{lookbehind:l,boundary:f,boundaryChars:p,index:m,state:y,flags:R}=this,T=this.boundary.length,S=T-1,g=r.length,b,E,P=z=>{this[z+"Mark"]=o},B=z=>{delete this[z+"Mark"]},x=(z,$,F,ne)=>{($===void 0||$!==F)&&this[z](ne&&ne.subarray($,F))},U=(z,$)=>{let F=z+"Mark";F in this&&($?(x(z,this[F],o,r),delete this[F]):(x(z,this[F],r.length,r),this[F]=0))};for(o=0;o<a;o++)switch(b=r[o],y){case D.START_BOUNDARY:if(m===f.length-2){if(b===Qt)R|=ke.LAST_BOUNDARY;else if(b!==Hr)return;m++;break}else if(m-1===f.length-2){if(R&ke.LAST_BOUNDARY&&b===Qt)y=D.END,R=0;else if(!(R&ke.LAST_BOUNDARY)&&b===Ur)m=0,x("onPartBegin"),y=D.HEADER_FIELD_START;else return;break}b!==f[m+2]&&(m=-2),b===f[m+2]&&m++;break;case D.HEADER_FIELD_START:y=D.HEADER_FIELD,P("onHeaderField"),m=0;case D.HEADER_FIELD:if(b===Hr){B("onHeaderField"),y=D.HEADERS_ALMOST_DONE;break}if(m++,b===Qt)break;if(b===vf){if(m===1)return;U("onHeaderField",!0),y=D.HEADER_VALUE_START;break}if(E=If(b),E<Bf||E>kf)return;break;case D.HEADER_VALUE_START:if(b===Af)break;P("onHeaderValue"),y=D.HEADER_VALUE;case D.HEADER_VALUE:b===Hr&&(U("onHeaderValue",!0),x("onHeaderEnd"),y=D.HEADER_VALUE_ALMOST_DONE);break;case D.HEADER_VALUE_ALMOST_DONE:if(b!==Ur)return;y=D.HEADER_FIELD_START;break;case D.HEADERS_ALMOST_DONE:if(b!==Ur)return;x("onHeadersEnd"),y=D.PART_DATA_START;break;case D.PART_DATA_START:y=D.PART_DATA,P("onPartData");case D.PART_DATA:if(s=m,m===0){for(o+=S;o<g&&!(r[o]in p);)o+=T;o-=S,b=r[o]}if(m<f.length)f[m]===b?(m===0&&U("onPartData",!0),m++):m=0;else if(m===f.length)m++,b===Hr?R|=ke.PART_BOUNDARY:b===Qt?R|=ke.LAST_BOUNDARY:m=0;else if(m-1===f.length)if(R&ke.PART_BOUNDARY){if(m=0,b===Ur){R&=~ke.PART_BOUNDARY,x("onPartEnd"),x("onPartBegin"),y=D.HEADER_FIELD_START;break}}else R&ke.LAST_BOUNDARY&&b===Qt?(x("onPartEnd"),y=D.END,R=0):m=0;if(m>0)l[m-1]=b;else if(s>0){let z=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);x("onPartData",0,s,z),s=0,P("onPartData"),o--}break;case D.END:break;default:throw new Error(`Unexpected state entered: ${y}`)}U("onHeaderField"),U("onHeaderValue"),U("onPartData"),this.index=m,this.state=y,this.flags=R}end(){if(this.state===D.HEADER_FIELD_START&&this.index===0||this.state===D.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==D.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var $f={};Ti($f,{default:()=>zf});var He=require("@raycast/api");var ls=Se(require("process"),1),cs=Se(us(),1);async function fs(n){if(ls.default.platform!=="darwin")throw new Error("macOS only");let{stdout:r}=await(0,cs.default)("osascript",["-e",n]);return r}var Ns=Se(require("http"),1),Us=Se(require("https"),1),Ue=Se(require("zlib"),1),Z=Se(require("stream"),1);function bf(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let r=n.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,r).split(";"),a="",s=!1,l=o[0]||"text/plain",f=l;for(let R=1;R<o.length;R++)o[R]==="base64"?s=!0:(f+=`;${o[R]}`,o[R].indexOf("charset=")===0&&(a=o[R].substring(8)));!o[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let p=s?"base64":"ascii",m=unescape(n.substring(r+1)),y=Buffer.from(m,p);return y.type=l,y.typeFull=f,y.charset=a,y}var ds=bf;var le=Se(require("stream"),1),bt=require("util");jt();eo();var Be=class extends Error{constructor(r,o){super(r);Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var re=class extends Be{constructor(r,o,a){super(r,o);a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var Nr=Symbol.toStringTag,to=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[Nr]==="URLSearchParams",Vt=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[Nr]),Ts=n=>typeof n=="object"&&(n[Nr]==="AbortSignal"||n[Nr]==="EventTarget");var Q=Symbol("Body internals"),we=class{constructor(r,{size:o=0}={}){let a=null;r===null?r=null:to(r)?r=Buffer.from(r.toString()):Vt(r)||Buffer.isBuffer(r)||(bt.types.isAnyArrayBuffer(r)?r=Buffer.from(r):ArrayBuffer.isView(r)?r=Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof le.default||(r instanceof mt?(r=ws(r),a=r.type.split("=")[1]):r=Buffer.from(String(r))));let s=r;Buffer.isBuffer(r)?s=le.default.Readable.from(r):Vt(r)&&(s=le.default.Readable.from(r.stream())),this[Q]={body:r,stream:s,boundary:a,disturbed:!1,error:null},this.size=o,r instanceof le.default&&r.on("error",l=>{let f=l instanceof Be?l:new re(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[Q].error=f})}get body(){return this[Q].stream}get bodyUsed(){return this[Q].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:a}=await Gr(this);return r.slice(o,o+a)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let a=new mt,s=new URLSearchParams(await this.text());for(let[l,f]of s)a.append(l,f);return a}let{toFormData:o}=await Promise.resolve().then(()=>(Bs(),vs));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[Q].body&&this[Q].body.type||"",o=await this.buffer();return new $e([o],{type:r})}async json(){let r=await Gr(this);return JSON.parse(r.toString())}async text(){return(await Gr(this)).toString()}buffer(){return Gr(this)}};we.prototype.buffer=(0,bt.deprecate)(we.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(we.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function Gr(n){if(n[Q].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[Q].disturbed=!0,n[Q].error)throw n[Q].error;let{body:r}=n;if(r===null||!(r instanceof le.default))return Buffer.alloc(0);let o=[],a=0;try{for await(let s of r){if(n.size>0&&a+s.length>n.size){let l=new re(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw r.destroy(l),l}a+=s.length,o.push(s)}}catch(s){throw s instanceof Be?s:new re(`Invalid response body while trying to fetch ${n.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?Buffer.from(o.join("")):Buffer.concat(o,a)}catch(s){throw new re(`Could not create Buffer from response body for ${n.url}: ${s.message}`,"system",s)}else throw new re(`Premature close of server response while trying to fetch ${n.url}`)}var yt=(n,r)=>{let o,a,{body:s}=n[Q];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof le.default&&typeof s.getBoundary!="function"&&(o=new le.PassThrough({highWaterMark:r}),a=new le.PassThrough({highWaterMark:r}),s.pipe(o),s.pipe(a),n[Q].stream=o,s=a),s},qf=(0,bt.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Vr=(n,r)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":to(n)?"application/x-www-form-urlencoded;charset=UTF-8":Vt(n)?n.type||null:Buffer.isBuffer(n)||bt.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof mt?`multipart/form-data; boundary=${r[Q].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${qf(n)}`:n instanceof le.default?null:"text/plain;charset=UTF-8",ks=n=>{let{body:r}=n[Q];return r===null?0:Vt(r)?r.size:Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Is=(n,{body:r})=>{r===null?n.end():r.pipe(n)};var no=require("util"),Xt=Se(require("http"),1),Yr=typeof Xt.default.validateHeaderName=="function"?Xt.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let r=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},oo=typeof Xt.default.validateHeaderValue=="function"?Xt.default.validateHeaderValue:(n,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},G=class extends URLSearchParams{constructor(r){let o=[];if(r instanceof G){let a=r.raw();for(let[s,l]of Object.entries(a))o.push(...l.map(f=>[s,f]))}else if(r!=null)if(typeof r=="object"&&!no.types.isBoxedPrimitive(r)){let a=r[Symbol.iterator];if(a==null)o.push(...Object.entries(r));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(s=>{if(typeof s!="object"||no.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");o=o.length>0?o.map(([a,s])=>(Yr(a),oo(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0;super(o);return new Proxy(this,{get(a,s,l){switch(s){case"append":case"set":return(f,p)=>(Yr(f),oo(f,String(p)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return f=>(Yr(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let a=o.join(", ");return/^content-encoding$/i.test(r)&&(a=a.toLowerCase()),a}forEach(r,o=void 0){for(let a of this.keys())Reflect.apply(r,o,[this.get(a),a,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let a=this.getAll(o);return o==="host"?r[o]=a[0]:r[o]=a.length>1?a:a[0],r},{})}};Object.defineProperties(G.prototype,["get","entries","forEach","values"].reduce((n,r)=>(n[r]={enumerable:!0},n),{}));function Os(n=[]){return new G(n.reduce((r,o,a,s)=>(a%2===0&&r.push(s.slice(a,a+2)),r),[]).filter(([r,o])=>{try{return Yr(r),oo(r,String(o)),!0}catch{return!1}}))}var Wf=new Set([301,302,303,307,308]),Qr=n=>Wf.has(n);var ce=Symbol("Response internals"),X=class extends we{constructor(r=null,o={}){super(r,o);let a=o.status!=null?o.status:200,s=new G(o.headers);if(r!==null&&!s.has("Content-Type")){let l=Vr(r,this);l&&s.append("Content-Type",l)}this[ce]={type:"default",url:o.url,status:a,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ce].type}get url(){return this[ce].url||""}get status(){return this[ce].status}get ok(){return this[ce].status>=200&&this[ce].status<300}get redirected(){return this[ce].counter>0}get statusText(){return this[ce].statusText}get headers(){return this[ce].headers}get highWaterMark(){return this[ce].highWaterMark}clone(){return new X(yt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!Qr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new X(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new X(null,{status:0,statusText:""});return r[ce].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(X.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Ms=require("url");var xs=n=>{if(n.search)return n.search;let r=n.href.length-1,o=n.hash||(n.href[r]==="#"?"#":"");return n.href[r-o.length]==="?"?"?":""};var qs=require("net");function Ws(n,r=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",r&&(n.pathname="",n.search=""),n)}var Ds=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Fs="strict-origin-when-cross-origin";function Ls(n){if(!Ds.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function Df(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let r=n.host.replace(/(^\[)|(]$)/g,""),o=(0,qs.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(n.host)?!1:n.protocol==="file:"}function gt(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:Df(n)}function zs(n,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let a=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let s=n.referrer,l=Ws(s),f=Ws(s,!0);l.toString().length>4096&&(l=f),r&&(l=r(l)),o&&(f=o(f));let p=new URL(n.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return gt(l)&&!gt(p)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===p.origin?l:gt(l)&&!gt(p)?"no-referrer":f;case"same-origin":return l.origin===p.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===p.origin?l:f;case"no-referrer-when-downgrade":return gt(l)&&!gt(p)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function $s(n){let r=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let a of r)a&&Ds.has(a)&&(o=a);return o}var N=Symbol("Request internals"),Xr=n=>typeof n=="object"&&typeof n[N]=="object",Ie=class extends we{constructor(r,o={}){let a;if(Xr(r)?a=new URL(r.url):(a=new URL(r),r={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentails.`);let s=o.method||r.method||"GET";if(s=s.toUpperCase(),(o.body!=null||Xr(r))&&r.body!==null&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Xr(r)&&r.body!==null?yt(r):null;super(l,{size:o.size||r.size||0});let f=new G(o.headers||r.headers||{});if(l!==null&&!f.has("Content-Type")){let y=Vr(l,this);y&&f.set("Content-Type",y)}let p=Xr(r)?r.signal:null;if("signal"in o&&(p=o.signal),p!=null&&!Ts(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=o.referrer==null?r.referrer:o.referrer;if(m==="")m="no-referrer";else if(m){let y=new URL(m);m=/^about:(\/\/)?client$/.test(y)?"client":y}else m=void 0;this[N]={method:s,redirect:o.redirect||r.redirect||"follow",headers:f,parsedURL:a,signal:p,referrer:m},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[N].method}get url(){return(0,Ms.format)(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}get referrer(){if(this[N].referrer==="no-referrer")return"";if(this[N].referrer==="client")return"about:client";if(this[N].referrer)return this[N].referrer.toString()}get referrerPolicy(){return this[N].referrerPolicy}set referrerPolicy(r){this[N].referrerPolicy=Ls(r)}clone(){return new Ie(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Ie.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var js=n=>{let{parsedURL:r}=n[N],o=new G(n[N].headers);o.has("Accept")||o.set("Accept","*/*");let a=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(a="0"),n.body!==null){let p=ks(n);typeof p=="number"&&!Number.isNaN(p)&&(a=String(p))}a&&o.set("Content-Length",a),n.referrerPolicy===""&&(n.referrerPolicy=Fs),n.referrer&&n.referrer!=="no-referrer"?n[N].referrer=zs(n):n[N].referrer="no-referrer",n[N].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=n;typeof s=="function"&&(s=s(r)),!o.has("Connection")&&!s&&o.set("Connection","close");let l=xs(r),f={path:r.pathname+l,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:s};return{parsedURL:r,options:f}};var io=class extends Be{constructor(r,o="aborted"){super(r,o)}};var Ff=new Set(["data:","http:","https:"]);async function Kr(n,r){return new Promise((o,a)=>{let s=new Ie(n,r),{parsedURL:l,options:f}=js(s);if(!Ff.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let b=ds(s.url),E=new X(b,{headers:{"Content-Type":b.typeFull}});o(E);return}let p=(l.protocol==="https:"?Us.default:Ns.default).request,{signal:m}=s,y=null,R=()=>{let b=new io("The operation was aborted.");a(b),s.body&&s.body instanceof Z.default.Readable&&s.body.destroy(b),!(!y||!y.body)&&y.body.emit("error",b)};if(m&&m.aborted){R();return}let T=()=>{R(),g()},S=p(l,f);m&&m.addEventListener("abort",T);let g=()=>{S.abort(),m&&m.removeEventListener("abort",T)};S.on("error",b=>{a(new re(`request to ${s.url} failed, reason: ${b.message}`,"system",b)),g()}),Lf(S,b=>{y.body.destroy(b)}),process.version<"v14"&&S.on("socket",b=>{let E;b.prependListener("end",()=>{E=b._eventsCount}),b.prependListener("close",P=>{if(y&&E<b._eventsCount&&!P){let B=new Error("Premature close");B.code="ERR_STREAM_PREMATURE_CLOSE",y.body.emit("error",B)}})}),S.on("response",b=>{S.setTimeout(0);let E=Os(b.rawHeaders);if(Qr(b.statusCode)){let z=E.get("Location"),$=z===null?null:new URL(z,s.url);switch(s.redirect){case"error":a(new re(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":$!==null&&E.set("Location",$);break;case"follow":{if($===null)break;if(s.counter>=s.follow){a(new re(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let F={headers:new G(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:yt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(b.statusCode!==303&&s.body&&r.body instanceof Z.default.Readable){a(new re("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(b.statusCode===303||(b.statusCode===301||b.statusCode===302)&&s.method==="POST")&&(F.method="GET",F.body=void 0,F.headers.delete("content-length"));let ne=$s(E);ne&&(F.referrerPolicy=ne),o(Kr(new Ie($,F))),g();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}m&&b.once("end",()=>{m.removeEventListener("abort",T)});let P=(0,Z.pipeline)(b,new Z.PassThrough,a);process.version<"v12.10"&&b.on("aborted",T);let B={url:s.url,status:b.statusCode,statusText:b.statusMessage,headers:E,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},x=E.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||x===null||b.statusCode===204||b.statusCode===304){y=new X(P,B),o(y);return}let U={flush:Ue.default.Z_SYNC_FLUSH,finishFlush:Ue.default.Z_SYNC_FLUSH};if(x==="gzip"||x==="x-gzip"){P=(0,Z.pipeline)(P,Ue.default.createGunzip(U),a),y=new X(P,B),o(y);return}if(x==="deflate"||x==="x-deflate"){(0,Z.pipeline)(b,new Z.PassThrough,a).once("data",$=>{P=($[0]&15)===8?(0,Z.pipeline)(P,Ue.default.createInflate(),a):(0,Z.pipeline)(P,Ue.default.createInflateRaw(),a),y=new X(P,B),o(y)});return}if(x==="br"){P=(0,Z.pipeline)(P,Ue.default.createBrotliDecompress(),a),y=new X(P,B),o(y);return}y=new X(P,B),o(y)}),Is(S,s)})}function Lf(n,r){let o=Buffer.from(`0\r
\r
`),a=!1,s=!1,l;n.on("response",f=>{let{headers:p}=f;a=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),n.on("socket",f=>{let p=()=>{if(a&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",r(m)}};f.prependListener("close",p),n.on("abort",()=>{f.removeListener("close",p)}),f.on("data",m=>{s=Buffer.compare(m.slice(-5),o)===0,!s&&l&&(s=Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Buffer.compare(m.slice(-2),o.slice(3))===0),l=m})})}async function zf(){try{let{accessToken:n}=(0,He.getPreferenceValues)(),r=await fs("the clipboard");if(r.length===0)throw new Error("Clipboard is empty");new URL(r);let o=await Kr("https://api-ssl.bitly.com/v4/shorten",{headers:new G({Authorization:`Bearer ${n}`,"Content-Type":"application/json"}),method:"post",body:JSON.stringify({long_url:r})}),{errors:a,link:s}=await o.json();if(a)throw new Error("Invalid URL String");await(0,He.copyTextToClipboard)(s),await(0,He.showHUD)("Copied shortened URL to clipboard")}catch(n){await(0,He.showHUD)(n.toString())}}module.exports=wl($f);0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
